schemas:
  Override:
    type: Object
    properties:
      source:
        type: string
      target:
        type: array
        items:
          type: string
      op:
        type: string
        enum: ['op', 'literal', 'stringify', 'stringify-array']

  Task:
    type: object
    properties:
      ProductUris:
        type: array
        items:
          type: string
          format: uri
      AdTemplateUri:
        type: string
        format: uri
      FlightId:
        type: integer
        format: int32
      Overrides:
        type: object
        description: 'A map or ProductUri keys with Override values'
        additionalProperties:
          $ref: '#/schemas/Override'

  JobInput:
    type: object
    required:
      - TaskId
    properties:
      TaskId:
        type: string
        maxLength: 100
      TaskArgs:
        $ref: '#/schemas/Task'
      PartitionId:
        type: string

  SuccessfulOutput:
    type: object
    properties:
      errors:
        type: array
        items:
          type: object
          properties:
            required:
              - message
            message:
              type: string

  CompletedOutput:
    type: object
    required:
      - AdIds
    properties:
      AdIds:
        type: array
        items:
          type: integer
          format: int32

  FailedOutput:
    type: object
    required:
      - errors
    properties:
      errors:
        type: array
        items:
          type: object
          properties:
            required:
              - message
            message:
              type: string

  Job:
    type: object
    required:
      - TaskId
    properties:
      CompletedTime:
        type: string
      NetworkId:
        type: integer
      Status:
        type: string
      TaskArgs:
        $ref: '#/schemas/Task'
      AvailableTime:
        type: string
      Output:
        type: object
        anyOf:
          - $ref: '#/schemas/CompletedOutput'
          - $ref: '#/schemas/FailedOutput'
      Id:
        type: integer
      PartitionId:
        type: string

  JobList:
    type: object
    properties:
      page:
        type: integer
        format: int32
      pageSize:
        type: integer
        format: int32
      totalPages:
        type: integer
        format: int32
      totalItems:
        type: integer
        format: int64
      items:
        type: array
        items:
          $ref: '#/schemas/Job'
